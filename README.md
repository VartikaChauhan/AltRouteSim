# AltRouteSim ğŸš—ğŸ›£ï¸

**AltRouteSim** is a high-performance C++ based traffic simulation engine that visualizes vehicle movement on road networks using OpenGL and GLFW. It supports shortest path routing via Dijkstra, dynamic vehicle rendering based on real-time ML predictions, and supports OSM (OpenStreetMap) or CSV-based map data.

---

##  Features

-  Dijkstra-based shortest path routing
-  Multi-vehicle movement simulation
-  ML-driven traffic class prediction (via pybind11 + sklearn)
-  Color-coded vehicle rendering (Green = Smooth, Yellow = Moderate, Red = Heavy)
-  Real-time OpenGL map visualization (supports CSV and OSM-based maps)
-  Simulation logging to `log.csv` (Vehicle ID, path, ETA, predicted class)
-  Vehicle info overlay (ID, ETA) using OpenGL text rendering
-  Multithreaded simulation for parallel updates

---


##  Project Structure

```bash
AltRouteSim/
â”œâ”€â”€ assets/                         
â”‚   â”œâ”€â”€ snap1.jpeg
â”‚   â””â”€â”€ snap2.jpeg

â”œâ”€â”€ build/                         # Build directory (generated by CMake)
â”‚   â””â”€â”€ AltRouteSim                # Executable binary after build

â”œâ”€â”€ cache/

â”œâ”€â”€ venv/                          # Python virtual environment
 
â”œâ”€â”€ data/                           
â”‚   â”œâ”€â”€ nodes.csv
â”‚   â””â”€â”€ edges.csv

â”œâ”€â”€ logs/                           
â”‚   â”œâ”€â”€ Logger.cpp
â”‚   â””â”€â”€ Logger.hpp

â”œâ”€â”€ scripts/                           
â”‚   â”œâ”€â”€ cache/
â”‚   â”œâ”€â”€ osm_to_csv.py               # Converts OSM XML to CSV node/edge format
â”‚   â””â”€â”€ run.sh                      # Optional startup script


â”œâ”€â”€ ml/                             # Machine Learning related files
â”‚   â”œâ”€â”€ train_model.py 
â”‚   â”œâ”€â”€ inference_wrapper.py        # Wrapper for ML inference
â”‚   â”œâ”€â”€ pybind_wrapper.cpp          # C++ â†” Python interface using PyBind11
â”‚   â”œâ”€â”€ _pycache_
â”‚   â””â”€â”€ model.pkl                   # Trained model used in simulation

â”œâ”€â”€ src/                            # Main source code directory
â”‚   â”œâ”€â”€ Graph.hpp
â”‚   â”œâ”€â”€ Graph.cpp
â”‚   â”œâ”€â”€ Simulator.hpp
â”‚   â”œâ”€â”€ Simulator.cpp
â”‚   â”œâ”€â”€ Vehicle.hpp
â”‚   â”œâ”€â”€ stb_easy_font.h
â”‚   â”œâ”€â”€ Render.hpp
â”‚   â”œâ”€â”€ Render.cpp
â”‚   â”œâ”€â”€ MLPredictor.hpp
â”‚   â”œâ”€â”€ MLPredictor.cpp
â”‚   â””â”€â”€ main.cpp                   # Entry point

â”œâ”€â”€ log.csv                        # Structured CSV log (per vehicle)
â”œâ”€â”€ log.txt                        # Summary text log
â”œâ”€â”€ run_simulation.sh              # Bash script to build + run
â”œâ”€â”€ .gitignore                     # Git ignore rules
â”œâ”€â”€ CMakeLists.txt                 # Build instructions
â””â”€â”€ README.md                      # Project documentation
```
---

##  How to Run
- 1.Install Dependencies
```bash 
sudo apt update
sudo apt install build-essential cmake libglfw3-dev libglew-dev libglm-dev python3 python3-pip
```
- 2.Build the Project
```bash 
mkdir build
cd build
cmake ..
make
```
- 3.Set Up and Train ML Model
```bash
python3 -m venv venv
source venv/bin/activate
cd ml/
pip install scikit-learn joblib pandas
python3 train_model.py   # Generates model.pkl from travel_log.csv
```
ML model classifies vehicles into traffic severity classes (0 = Green, 1 = Yellow, 2 = Red).The model is loaded by C++ using PyBind11.

- 4.Run Simulation
```bash
./build/AltRouteSim
```
The window will launch showing:
- The map (from nodes.csv / edges.csv)
- Vehicles with class-based color
- Overlaid text showing vehicle ID, ETA, and class

---

### ğŸ” Sample Input (data/nodes.csv and data/edges.csv)
```bash
# data/nodes.csv
id,x,y
802637947,733200.0,3161400.0
847745702,733400.0,3161420.0
...

# data/edges.csv
from,to,length
802637947,847745702,43.80
847745702,847745730,23.10
...
```
---
### ğŸŒ OSM Support
Convert .osm (OpenStreetMap XML) to CSV using:
```bash
cd scripts/
python3 osm_to_csv.py map.osm
Outputs nodes.csv and edges.csv in data/ folder
```
Compatible with Graph::loadFromCSV() method

---
### ğŸ“¤ Output Logs
- log.txt â€” readable route summaries and timestamps
- log.csv â€” structured logs:
```bash
Vehicle ID, From, To, Path, Entry Tick, Exit Tick, Predicted Class
2,802637947,847745702,"802637947 847745702 847745730",14,26,1
```
---
