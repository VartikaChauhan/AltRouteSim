# AltRouteSim 🚗🛣️

**AltRouteSim** is a high-performance C++ based traffic simulation engine that visualizes vehicle movement on road networks using OpenGL and GLFW. It supports shortest path routing via Dijkstra, dynamic vehicle rendering based on real-time ML predictions, and supports OSM (OpenStreetMap) or CSV-based map data.

---

##  Features

-  Dijkstra-based shortest path routing
-  Multi-vehicle movement simulation
-  ML-driven traffic class prediction (via pybind11 + sklearn)
-  Color-coded vehicle rendering (Green = Smooth, Yellow = Moderate, Red = Heavy)
-  Real-time OpenGL map visualization (supports CSV and OSM-based maps)
-  Simulation logging to `log.csv` (Vehicle ID, path, ETA, predicted class)
-  Vehicle info overlay (ID, ETA) using OpenGL text rendering
-  Multithreaded simulation for parallel updates

---


##  Project Structure

```bash
AltRouteSim/
├── assets/                         
│   ├── snap1.jpeg
│   └── snap2.jpeg

├── build/                         # Build directory (generated by CMake)
│   └── AltRouteSim                # Executable binary after build

├── cache/

├── venv/                          # Python virtual environment
 
├── data/                           
│   ├── nodes.csv
│   └── edges.csv

├── logs/                           
│   ├── Logger.cpp
│   └── Logger.hpp

├── scripts/                           
│   ├── cache/
│   ├── osm_to_csv.py               # Converts OSM XML to CSV node/edge format
│   └── run.sh                      # Optional startup script


├── ml/                             # Machine Learning related files
│   ├── train_model.py 
│   ├── inference_wrapper.py        # Wrapper for ML inference
│   ├── pybind_wrapper.cpp          # C++ ↔ Python interface using PyBind11
│   ├── _pycache_
│   └── model.pkl                   # Trained model used in simulation

├── src/                            # Main source code directory
│   ├── Graph.hpp
│   ├── Graph.cpp
│   ├── Simulator.hpp
│   ├── Simulator.cpp
│   ├── Vehicle.hpp
│   ├── stb_easy_font.h
│   ├── Render.hpp
│   ├── Render.cpp
│   ├── MLPredictor.hpp
│   ├── MLPredictor.cpp
│   └── main.cpp                   # Entry point

├── log.csv                        # Structured CSV log (per vehicle)
├── log.txt                        # Summary text log
├── run_simulation.sh              # Bash script to build + run
├── .gitignore                     # Git ignore rules
├── CMakeLists.txt                 # Build instructions
└── README.md                      # Project documentation
```
---

##  How to Run
- 1.Install Dependencies
```bash 
sudo apt update
sudo apt install build-essential cmake libglfw3-dev libglew-dev libglm-dev python3 python3-pip
```
- 2.Build the Project
```bash 
mkdir build
cd build
cmake ..
make
```
- 3.Set Up and Train ML Model
```bash
python3 -m venv venv
source venv/bin/activate
cd ml/
pip install scikit-learn joblib pandas
python3 train_model.py   # Generates model.pkl from travel_log.csv
```
ML model classifies vehicles into traffic severity classes (0 = Green, 1 = Yellow, 2 = Red).The model is loaded by C++ using PyBind11.

- 4.Run Simulation
```bash
./build/AltRouteSim
```
The window will launch showing:
- The map (from nodes.csv / edges.csv)
- Vehicles with class-based color
- Overlaid text showing vehicle ID, ETA, and class

---

### 🔁 Sample Input (data/nodes.csv and data/edges.csv)
```bash
# data/nodes.csv
id,x,y
802637947,733200.0,3161400.0
847745702,733400.0,3161420.0
...

# data/edges.csv
from,to,length
802637947,847745702,43.80
847745702,847745730,23.10
...
```
---
### 🌐 OSM Support
Convert .osm (OpenStreetMap XML) to CSV using:
```bash
cd scripts/
python3 osm_to_csv.py map.osm
Outputs nodes.csv and edges.csv in data/ folder
```
Compatible with Graph::loadFromCSV() method

---
### 📤 Output Logs
- log.txt — readable route summaries and timestamps
- log.csv — structured logs:
```bash
Vehicle ID, From, To, Path, Entry Tick, Exit Tick, Predicted Class
2,802637947,847745702,"802637947 847745702 847745730",14,26,1
```
---
